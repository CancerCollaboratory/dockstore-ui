<div id="container-header">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <h3 class="available-containers">
          Register Container
        </h3>
        <div class="button back-to-containers pull-right">
          <p>
            <a href="/containers">Back to My Containers</a>
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container view-content ns-containers" style="margin-top: 12px;">
  <div class="row">
    <div class="col-md-8 col-md-offset-2">
      <div class="alert alert-info" role="alert" ng-if="registeringContainer">
        <span class="glyphicon glyphicon-refresh glyphicon-refresh-animate">
        </span>
        Please wait, processing container registration...
      </div>
      <div class="alert alert-warning" role="alert">
      <span class="glyphicon glyphicon-warning-sign"></span>&nbsp;
        This page has not been connected to the backend yet, and will not register containers.
      </div>

      <form name="registerContainerForm" ng-submit="registerContainer()" novalidate>

        <div class="form-group">
          <label>Container Name</label>
          <input
              type="text"
              class="form-control"
              name="contName"
              ng-model="containerObj.name"
              ng-minlength="3"
              ng-maxlength="20"
              ng-pattern="/^[a-zA-Z0-9]+([-_][a-zA-Z0-9]+)*$/i"
              required
              placeholder="e.g. RNA Sequencer"/>
          <div
              class="form-error-messages"
              ng-messages="registerContainerForm.contName.$error"
              ng-if="registerContainerForm.contName.$touched">
            <div ng-messages-include="templates/validation/containers/name.html">
            </div>
          </div>
        </div>

        <div class="form-group">
          <label>Container Version</label>
          <input
              type="text"
              class="form-control"
              name="contVersion"
              ng-model="containerObj.version"
              ng-maxlength="512"
              required
              placeholder="e.g. 1.2.1"/>
          <div
              class="form-error-messages"
              ng-messages="registerContainerForm.contVersion.$error"
              ng-if="registerContainerForm.contVersion.$touched">
            <div ng-messages-include="templates/validation/containers/version.html">
            </div>
          </div>
        </div>

        <div class="form-group">
          <label>Container Labels</label>
          <input
              type="text"
              class="input-sm form-control"
              name="contLabels"
              ng-model="containerObj.labels"
              ng-pattern="/^(|\s*([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*)(\s*,\s*([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*))*\s*)$/i"
              ng-maxlength="512"
              placeholder="e.g. dockstore, oicr-icgc, pancancer" />
          <div
              class="form-error-messages"
              ng-messages="registerContainerForm.contLabels.$error"
              ng-if="registerContainerForm.contLabels.$touched">
            <div ng-messages-include="templates/validation/containers/labels.html">
            </div>
          </div>
        </div>

        <div class="form-group">
          <label>Dockerfile URL</label>
          <input
              type="text"
              class="form-control"
              name="dockerfileUrl"
              ng-model="containerObj.dockerfileUrl"
              ng-maxlength="512"
              ng-pattern="/^(https?:\/\/)?([\w-]+[\.:\/#])+Dockerfile$/i"
              required
              placeholder="e.g. https://www.dockstore.org/~username/rnaseqc/Dockerfile"/>
          <div
              class="form-error-messages"
              ng-messages="registerContainerForm.dockerfileUrl.$error"
              ng-if="registerContainerForm.dockerfileUrl.$touched">
            <div ng-messages-include="templates/validation/containers/dockerfileUrl.html">
            </div>
          </div>
        </div>

        <div class="form-group">
          <label>Docker Tar URL</label>
          <input
              type="text"
              class="form-control"
              name="dockerTarUrl"
              ng-model="containerObj.dockerTarUrl"
              ng-maxlength="512"
              ng-pattern="/^(https?:\/\/)?([\w-]+[\.:\/#])+[\w-\.]+tar$/i"
              required
              placeholder="e.g. https://www.dockstore.org/~username/rnaseqc/rnaseqc.tar"/>
          <div
              class="form-error-messages"
              ng-messages="registerContainerForm.dockerTarUrl.$error"
              ng-if="registerContainerForm.dockerTarUrl.$touched">
            <div ng-messages-include="templates/validation/containers/dockerTarUrl.html">
            </div>
          </div>
        </div>

        <div class="form-group">
          <label>Docker URL</label>
          <input
              type="text"
              class="form-control"
              name="dockerUrl"
              ng-model="containerObj.dockerUrl"
              ng-maxlength="512"
              ng-pattern="/^(https?:\/\/)?([\w-\.:\/#])+$/i"
              required
              placeholder="e.g. https://www.dockstore.org/~username/rnaseqc/docker/"/>
          <div
              class="form-error-messages"
              ng-messages="registerContainerForm.dockerUrl.$error"
              ng-if="registerContainerForm.dockerUrl.$touched">
            <div ng-messages-include="templates/validation/containers/dockerUrl.html">
            </div>
          </div>
        </div>

        <div class="form-group">
          <label>Descriptor Url</label>
          <input
              type="text"
              class="form-control"
              name="descriptorUrl"
              ng-model="containerObj.descriptorUrl"
              ng-maxlength="512"
              ng-pattern="/^(https?:\/\/)?([\w-]+[\.:\/#])+Dockstore\.cwl$/i"
              required
              placeholder="e.g. https://www.dockstore.org/~username/rnaseqc/Dockstore.cwl"/>
          <div
              class="form-error-messages"
              ng-messages="registerContainerForm.descriptorUrl.$error"
              ng-if="registerContainerForm.descriptorUrl.$touched">
            <div ng-messages-include="templates/validation/containers/descriptorUrl.html">
            </div>
          </div>
        </div>

        <button type="submit"
            class="btn btn-primary pull-right"
            ng-disabled="registerContainerForm.$invalid || registeringContainer">
          Register
        </button>
      </form>
    </div>
  </div>
</div>

<div id="our-sponsors">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <ul class="our-sponsors">
          <li>Our Sponsors:</li>
          <li><img src="images/collaboratory.png"></li>
          <li><img src="images/oicr.png"></li>
          <li><img src="images/ga4gh.png"></li>
        </ul>
      </div>
    </div>
  </div>
</div>
